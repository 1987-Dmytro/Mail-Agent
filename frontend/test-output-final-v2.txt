
> frontend@0.1.0 test:e2e:chromium
> playwright test --project=chromium tests/e2e/complete-user-journey.spec.ts


Running 2 tests using 2 workers

âœ… MSWâ†’Playwright Bridge: Installed 12/12 routes
=== STARTING COMPLETE USER JOURNEY E2E TEST ===
âœ… MSWâ†’Playwright Bridge: Installed 12/12 routes
=== TESTING RETURNING USER EXPERIENCE ===

ðŸ”§ PHASE 0: Setting up auth tokens to simulate connected services

ðŸ“‹ PHASE 1: Onboarding - Welcome
ðŸ”µ PW Route: Intercepted GET http://localhost:8000/api/v1/auth/status
ðŸ”µ PW Route: Returning user: {
  "id": 1,
  "email": "test@example.com",
  "gmail_connected": true,
  "telegram_connected": true,
  "telegram_id": "123456789",
  "telegram_username": "testuser",
  "onboarding_completed": true
}
ðŸ”µ PW Route: Intercepted GET http://localhost:8000/api/v1/auth/status
ðŸ”µ PW Route: Returning user: {
  "id": 1,
  "email": "test@example.com",
  "gmail_connected": true,
  "telegram_connected": true,
  "telegram_id": "123456789",
  "telegram_username": "testuser",
  "onboarding_completed": true
}
ðŸ”µ MSW: Intercepted GET http://localhost:8000/api/v1/dashboard/stats
ðŸ”µ MSW: Intercepted GET http://localhost:8000/api/v1/auth/gmail/config
ðŸ”µ MSWâ†’PW: GET /api/v1/dashboard/stats â†’ 200
ðŸ”µ MSWâ†’PW: GET /api/v1/auth/gmail/config â†’ 200
ðŸ”µ MSW: Intercepted GET http://localhost:8000/api/v1/auth/gmail/config
ðŸ”µ MSWâ†’PW: GET /api/v1/auth/gmail/config â†’ 200

ðŸ“§ PHASE 2: Gmail Connection - verifying token detection
âœ… RETURNING USER TEST PASSED
  âœ“  1 [chromium] â€º tests/e2e/complete-user-journey.spec.ts:169:7 â€º Complete User Journey E2E â€º returning user can access all features directly (1.5s)
  âœ˜  2 [chromium] â€º tests/e2e/complete-user-journey.spec.ts:26:7 â€º Complete User Journey E2E â€º new user completes full onboarding and uses the system (3.5s)


  1) [chromium] â€º tests/e2e/complete-user-journey.spec.ts:26:7 â€º Complete User Journey E2E â€º new user completes full onboarding and uses the system 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: getByText(/gmail connected|connected to/i)
    Expected: visible
    Error: strict mode violation: getByText(/gmail connected|connected to/i) resolved to 2 elements:
        1) <h3 class="text-xl font-semibold">Gmail Connected!</h3> aka getByRole('heading', { name: 'Gmail Connected!' })
        2) <p class="text-muted-foreground">â€¦</p> aka getByText('Connected to')

    Call log:
    [2m  - Expect "toBeVisible" with timeout 10000ms[22m
    [2m  - waiting for getByText(/gmail connected|connected to/i)[22m


      79 |     // Verify Gmail connection success state is shown
      80 |     const gmailSuccess = page.getByText(/gmail connected|connected to/i);
    > 81 |     await expect(gmailSuccess).toBeVisible({ timeout: 10000 });
         |                                ^
      82 |
      83 |     // Click Next to proceed (should be enabled now that Gmail is "connected")
      84 |     const nextBtn = page.getByRole('button', { name: /next/i });
        at /Users/hdv_1987/Desktop/ÐŸÑ€Ñ€Ð¾ÐµÐºÑ‚Ñ‹/Mail Agent/frontend/tests/e2e/complete-user-journey.spec.ts:81:32

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/complete-user-journey-Comp-71358-oarding-and-uses-the-system-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/complete-user-journey-Comp-71358-oarding-and-uses-the-system-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/complete-user-journey-Comp-71358-oarding-and-uses-the-system-chromium/error-context.md

  1 failed
    [chromium] â€º tests/e2e/complete-user-journey.spec.ts:26:7 â€º Complete User Journey E2E â€º new user completes full onboarding and uses the system 
  1 passed (7.9s)

[36m  Serving HTML report at http://localhost:53561. Press Ctrl+C to quit.[39m
