
> frontend@0.1.0 test:e2e:chromium
> playwright test --project=chromium tests/e2e/complete-user-journey.spec.ts


Running 2 tests using 2 workers

âœ… MSWâ†’Playwright Bridge: Installed 12/12 routes
=== TESTING RETURNING USER EXPERIENCE ===
âœ… MSWâ†’Playwright Bridge: Installed 12/12 routes
=== STARTING COMPLETE USER JOURNEY E2E TEST ===

ðŸ”§ PHASE 0: Setting up auth tokens to simulate connected services
ðŸ”µ PW Route: Intercepted GET http://localhost:8000/api/v1/auth/status
ðŸ”µ PW Route: Returning user: {
  "id": 1,
  "email": "test@example.com",
  "gmail_connected": true,
  "telegram_connected": true,
  "telegram_id": "123456789",
  "telegram_username": "testuser",
  "onboarding_completed": true
}

ðŸ“‹ PHASE 1: Onboarding - Welcome
ðŸ”µ PW Route: Intercepted GET http://localhost:8000/api/v1/auth/status
ðŸ”µ PW Route: Returning user: {
  "id": 1,
  "email": "test@example.com",
  "gmail_connected": true,
  "telegram_connected": true,
  "telegram_id": "123456789",
  "telegram_username": "testuser",
  "onboarding_completed": true
}
ðŸ”µ PW Route: Intercepted GET http://localhost:8000/api/v1/auth/status
ðŸ”µ PW Route: Returning user: {
  "id": 1,
  "email": "test@example.com",
  "gmail_connected": true,
  "telegram_connected": true,
  "telegram_id": "123456789",
  "telegram_username": "testuser",
  "onboarding_completed": true
}
ðŸ”µ MSW: Intercepted GET http://localhost:8000/api/v1/auth/gmail/config
ðŸ”µ MSWâ†’PW: GET /api/v1/auth/gmail/config â†’ 200
ðŸ”µ MSW: Intercepted GET http://localhost:8000/api/v1/dashboard/stats
ðŸ”µ MSW: Intercepted GET http://localhost:8000/api/v1/auth/gmail/config
ðŸ”µ MSWâ†’PW: GET /api/v1/auth/gmail/config â†’ 200
ðŸ”µ MSWâ†’PW: GET /api/v1/dashboard/stats â†’ 200

ðŸ“§ PHASE 2: Gmail Connection - verifying token detection
âœ… RETURNING USER TEST PASSED
  âœ“  1 [chromium] â€º tests/e2e/complete-user-journey.spec.ts:180:7 â€º Complete User Journey E2E â€º returning user can access all features directly (1.4s)

ðŸ’¬ PHASE 3: Telegram Linking - verifying token detection
ðŸ”µ MSW: Intercepted POST http://localhost:8000/api/v1/telegram/link
ðŸ”µ MSWâ†’PW: POST /api/v1/telegram/link â†’ 200
ðŸ”µ MSW: Intercepted GET http://localhost:8000/api/v1/telegram/verify/123456 (code: 123456)
ðŸ”µ MSWâ†’PW: GET /api/v1/telegram/verify/123456 â†’ 200
Telegram detected token and showed success state - clicking Continue

ðŸ“ PHASE 4: Folder Setup - creating default folder

âœ… PHASE 5: Completion Step
  âœ˜  2 [chromium] â€º tests/e2e/complete-user-journey.spec.ts:26:7 â€º Complete User Journey E2E â€º new user completes full onboarding and uses the system (10.6s)


  1) [chromium] â€º tests/e2e/complete-user-journey.spec.ts:26:7 â€º Complete User Journey E2E â€º new user completes full onboarding and uses the system 

    Error: [2mexpect([22m[31mlocator[39m[2m).[22mtoBeVisible[2m([22m[2m)[22m failed

    Locator: getByRole('button', { name: /complete|dashboard|finish/i })
    Expected: visible
    Timeout: 5000ms
    Error: element(s) not found

    Call log:
    [2m  - Expect "toBeVisible" with timeout 5000ms[22m
    [2m  - waiting for getByRole('button', { name: /complete|dashboard|finish/i })[22m


      147 |     // Click "Complete" or "Go to Dashboard" button
      148 |     const completeBtn = page.getByRole('button', { name: /complete|dashboard|finish/i });
    > 149 |     await expect(completeBtn).toBeVisible({ timeout: 5000 });
          |                               ^
      150 |     await completeBtn.click();
      151 |
      152 |     // =====================================================
        at /Users/hdv_1987/Desktop/ÐŸÑ€Ñ€Ð¾ÐµÐºÑ‚Ñ‹/Mail Agent/frontend/tests/e2e/complete-user-journey.spec.ts:149:31

    attachment #1: screenshot (image/png) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/complete-user-journey-Comp-71358-oarding-and-uses-the-system-chromium/test-failed-1.png
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    attachment #2: video (video/webm) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    test-results/complete-user-journey-Comp-71358-oarding-and-uses-the-system-chromium/video.webm
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    Error Context: test-results/complete-user-journey-Comp-71358-oarding-and-uses-the-system-chromium/error-context.md

  1 failed
    [chromium] â€º tests/e2e/complete-user-journey.spec.ts:26:7 â€º Complete User Journey E2E â€º new user completes full onboarding and uses the system 
  1 passed (15.0s)

[36m  Serving HTML report at http://localhost:9323. Press Ctrl+C to quit.[39m
